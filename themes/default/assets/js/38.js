"use strict";(self.webpackChunkjohncms=self.webpackChunkjohncms||[]).push([[38],{3038:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var n=s(821),i={class:"position-relative"},a={key:0,class:"d-flex justify-content-center position-absolute w-100 vote-preloader"},o=[(0,n._)("div",{class:"spinner-border text-secondary",role:"status"},[(0,n._)("span",{class:"visually-hidden"},"Loading...")],-1)],d=["disabled"],r=[(0,n._)("svg",{class:"icon download-button-icon mt-n1"},[(0,n._)("use",{"xlink:href":"/themes/default/assets/icons/sprite.svg#like"})],-1)],l=["disabled"],c=[(0,n._)("svg",{class:"icon download-button-icon me-1"},[(0,n._)("use",{"xlink:href":"/themes/default/assets/icons/sprite.svg#dislike"})],-1)];var u=s(9669),g=s.n(u);const _={name:"LikesComponent",props:{article_id:Number,rating:{type:Number,default:0},can_vote:{type:Boolean,default:!1},voted:{type:Number,default:0},set_vote_url:{type:String,default:"/news/add_vote/"}},data:function(){return{message:"",loading:!1,isVoted:this.voted,currentRating:this.rating}},computed:{rating_color:function(){var t="";return this.currentRating>0?t="text-success":this.currentRating<0&&(t="text-danger"),t}},methods:{setVote:function(t){var e=this;this.loading=!0,g().post(this.set_vote_url+this.article_id+"/"+t+"/").then((function(t){e.currentRating=t.data.rating,e.isVoted=t.data.voted,e.message=t.data.message,e.loading=!1})).catch((function(t){alert(t),e.loading=!1}))}}};const h=(0,s(3744).Z)(_,[["render",function(t,e,s,u,g,_){return(0,n.wg)(),(0,n.iD)("div",i,[g.loading?((0,n.wg)(),(0,n.iD)("div",a,o)):(0,n.kq)("",!0),(0,n._)("button",{class:(0,n.C_)(["btn btn-light btn-sm",g.isVoted>0?"liked":""]),onClick:e[0]||(e[0]=function(t){return _.setVote(1)}),disabled:g.isVoted>0||!s.can_vote},r,10,d),(0,n._)("span",{class:(0,n.C_)([_.rating_color,"ms-2 me-2 fw-bold"])},(0,n.zw)(g.currentRating>0?"+":"")+(0,n.zw)(g.currentRating),3),(0,n._)("button",{class:(0,n.C_)(["btn btn-light btn-sm",g.isVoted<0?"disliked":""]),onClick:e[1]||(e[1]=function(t){return _.setVote(0)}),disabled:g.isVoted<0||!s.can_vote},c,10,l)])}]])}}]);